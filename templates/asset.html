{% extends "base.html" %}
{% block content %}
  
  
  
  <div class="container">
  <div class="row">
    <div class="col-md-12">
    <div class="row">
      <div class="col-md-12 text-center">
        <h1>{{ asset.name }}</h1>
        <p> Created by {{ assetOwner.username }}</p>
      </div>
    </div>
     <!-- If user is course creator, make course content editable -->   
    <div class="row">
      <div class="col-md-12 text-center">
        {% if asset.user_id == user.id %}
        <a class="btn btn-primary"  href="{{ url_for('editAsset', asset_id=asset.id)}}" role="button">
          <span class="glyphicon glyphicon-cog">
        </a>
        {% endif %}
      </div>
    </div>
    <!-- Check for new alerts -->
    {% with dangers = get_flashed_messages(category_filter=["danger"]) %}
      {% if dangers %}
        {%- for msg in dangers %}
          <div class="divider"></div>
          <div class="row">
            <div class="alert alert-danger col-md-2 col-md-offset-5 text-center" role="alert">{{ msg }}</div>
          </div>
        {% endfor -%}
      {% endif %}
    {% endwith %}
        
    
    {% with successes = get_flashed_messages(category_filter=["success"]) %}
      {% if successes %}
        {%- for msg in successes %}
          <div class="divider"></div>
            <div class="row">
              <div class="alert alert-success col-md-2 col-md-offset-5 text-center" role="alert">{{ msg }}</div>
            </div>
        {% endfor -%}
      {% endif %}
    {% endwith %}
        
    
      

      <div class="divider"></div>
    <div class="row">
          <!-- Check if course has a picture, assign default picture if not -->
      {% if asset.picture_name != None %}
          <div class="col-md-6">
            <a href="{{ url_for('asset', asset_id=asset.id)}}">
            <img class="img-responsive" src="https://res-4.cloudinary.com/hdriydpma/image/upload/{{asset.picture_name}}">
              </a>
          </div>
      {% else %}
          <div class="col-md-6">
            <a href="{{ url_for('asset', asset_id=asset.id)}}">
            <img class="img-responsive" src="http://res.cloudinary.com/hdriydpma/image/upload/mentor_eiy5fn.jpg" width="100%">
              </a>
          </div>
      {% endif %}
      <div class="col-md-6">
       <div class="bigdivider"></div>
      <h3>Category: {{ asset.category }}</h3>
        <div class="divider"></div>
        <h3>Dimensions: {{ asset.dimensions }}</h3>
        
        <div class="divider"></div>
        <h3>Price: ${{ asset.price }}</h3>
        <div class="divider"></div>
         <button type="button" class="btn btn-success" data-toggle="modal" data-target="#myModal">
          Endorse
          </button>
        
              <!-- Button trigger modal -->

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Endorse</h4>
      </div>
      <div class="modal-body">
        <div class="row">
        <div class="col-md-12">
          This asset requires texture dimensions of {{ asset.dimensions }} and a transparent background.
          </div>
        </div>
        <div class="divider"></div>
        <div class="row">
        <div class="col-md-12">
          Please upload a texture that meets these specifications.
          </div>
        </div>
        
        <div class="divider"></div>
        
            <div class="row">
                <div class="col-md-6">
        <form action="{{ url_for('asset', asset_id=asset.id)}}" method='post' enctype="multipart/form-data">
            <div class="form-group">
              <p class="help-block">Upload Texture</p>
            <input type="file" name="file" required="required">
          </div>
        
    </div>
        </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Purchase</button>
        </form>
      </div>
    </div>
  </div>
</div>
      
      
      </div>
          </div>
      <div class="row">
      <div class="col-md-6">
        </div>
      <div class="col-md-3"><div class="line"></div>
        </div>
      
      </div>
      <div class="row">
        
        <div class="col-md-6 text-left">
          <div class="divider"></div>
           <h4>{{ asset.tag_line }}</h4>
          </div>
        <div class="col-md-2">

          <div class="divider"></div>
          <div class="row">
            <div class="col-md-12">
           Created by {{ assetOwner.username }}
            </div>
          </div>
          <div class="smalldivider"></div>
          <div class="row">
           <div class="col-md-12">
           {{ assetOwner.website }}
            </div>
          </div>
          <div class="smalldivider"></div>
          <div class="row">
           <div class="col-md-12">
           contact
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="smalldivider"></div>
          <div class="row">
            <div class="col-md-12">
              <a href="{{ url_for('user', user_id=asset.user_id)}}">
           <img class="img-circle"  src="{{assetOwner.profile_pic}}" height="75px">
              </a>
            </div>
          </div>
        </div>
          </div>
      
      <div class="row">
        <div class="col-md-12 text-left"> 
        
            <h2>About this Asset</h2>
         
          <div class="line"></div>
        </div>
      </div>
      
      <div class="row">
      <div class="col-md-6 text-left">
          <div class="divider"></div>
           {{ asset.description }}
          </div>
        <div class="col-md-6 text-left">
          <div class="divider"></div>
           {% if asset.youtube_url %}
      <iframe width="420" height="315" src="https://www.youtube.com/embed/{{ asset.youtube_url }}" frameborder="0" allowfullscreen></iframe>
            {% endif %}
          </div>
      
      </div>

      </div>
      </div>
  </div>
</div>

{% endblock %}