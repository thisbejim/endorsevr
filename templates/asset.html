{% extends "base.html" %}
{% block content %}


  <div class="bigdivider"></div>
  <div class="container">
  <div class="row">
    <div class="col-md-12">
    <div class="row">
      <div class="col-md-12">
        <h1>{{ asset.name }}</h1>
      </div>
    </div>
     <!-- If user is course creator, make course content editable -->   

    


      <div class="divider"></div>
    <div class="row">
          <!-- Check if course has a picture, assign default picture if not -->
      <div class="col-md-8">
<div class="embed-responsive embed-responsive-16by9">
     <iframe class="embed-responsive-item" src="" id="api-frame" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
    </div>
      </div>


      <div class="col-md-4 visible-md visible-lg">
          
            
      <div class="infobox well">
        <div class="row">
          <div class="col-md-12">
          <p class="text-muted">ABOUT THIS ASSET</p>
          </div>
          <div class="col-md-12">
        <p>Created by <a href="{{ url_for('user', user_id=assetOwner.id)}}">{{ assetOwner.username }}</a></p>
          </div>
         <div class="col-md-12">
        <p>Featured in <a href="{{ url_for('project', project_id=project.id)}}">{{ project.name }}</a></p>
          </div>
          
          <div class="col-md-12">
        <p>Placement Dimensions: {{ asset.dimensions }}</p>
          </div>
        <div class="col-md-12">
        <p>{{ asset.category }}, {{ asset.sub_category }}</p>
          </div>

        <div class="col-md-12">
         <button type="button" class="btn btn-success" data-toggle="modal" data-target="#myModal">
          Endorse
          </button>
          for ${{ asset.price }}
          </div>
            </div>
            </div>
        

  

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Endorse</h4>
      </div>
      <div class="modal-body">
        <div class="row">
        <div class="col-md-12">
          This asset requires texture dimensions of {{ asset.dimensions }} and a transparent background.
          </div>
        </div>
        <div class="divider"></div>
        <div class="row">
        <div class="col-md-12">
          Please upload a texture that meets these specifications.
          </div>
        </div>
        
        <div class="divider"></div>
        
            <div class="row">
                <div class="col-md-6">
        <form action="{{ url_for('asset', asset_id=asset.id)}}" method='post' enctype="multipart/form-data">
            <div class="form-group">
              <p class="help-block">Upload Texture</p>
            <input type="file" name="file" required="required">
          </div>
        
    </div>
        </div>
        
      </div>
      <div class="modal-footer">
        {% if user %}
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Purchase</button>
        {% else %}
        <fieldset disabled>
        <p class="help-block">Please log in to endorse.</p>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Purchase</button>
        </fieldset>
        {% endif %}
        </form>
      </div>
    </div>
  </div>
</div>
 <!-- Modal end -->     

      
      
      

      


      </div>
      
      
      
      <div class="row">
       <div class="col-md-12">
         <div class="divider"></div> 
         <p>Other Project Assets</p>
         <div class="line"></div>
         <div class="smalldivider"></div> 

                 
                 
                 
          <div id="wrapper">
    <div id="columns">
      {% for i in assets %}
        <div class="pin" id="{{i.id}}">
            <a href="{{ url_for('asset', asset_id=i.id)}}">
              <img class="img-responsive" src="https://res-4.cloudinary.com/hdriydpma/image/upload/{{i.picture_name}}" width="100%">
              </a>
          <div class="line"></div>
          <p class="boxtexttitle"><b>  <a href="{{ url_for('asset', asset_id=i.id)}}">{{ i.name }}</a></b></p>
          <div class="line"></div>
          <p class="boxtext">{{ i.price }}</p>
      </div>
    {% endfor %}
            </div>
          </div>
   </div>
      </div>  
      </div>
  </div>
</div>

<script>

var iframe = document.getElementById( 'api-frame' );
var version = '1.0.0';
var urlid = '{{ asset.model_url }}';
var client = new Sketchfab( version, iframe );

client.init( urlid, {
    success: function onSuccess( api ){
        //API is ready to use
        api.start();
    },
    error: function onError() {
        console.log( 'Viewer error' );
    }
} );
</script>
    
    <script>
  

$( document ).ready(function() {
    $('.pin').each(function(i,obj) {
      $(this).delay((i++) * 100).queue(function(){
        $(this).addClass('pinAnim');
        $(this).dequeue();
        obj.style.opacity = 1;
      }); 
  });
});
 

</script>

{% endblock %}